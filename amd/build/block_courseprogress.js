define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig"],function(l,d,u){return{init:function(){var e=null,r=u.getPanel("#courseprogressblock"),o=u.getPanel("#courseprogressblock","body"),s=(u.getPanel("#courseprogressblock","header"),u.getPanel("#courseprogressblock","footer"),o+" #wdm-courseprogress-select"),a=o+" .ct-chart",n=o+" .loader",c=r+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item";function t(){var o=l(s).val();u.changeExportUrl(o,c,"F"),l.ajax({url:u.requestUrl,type:"GET",dataType:"json",data:{action:"get_courseprogress_graph_data_ajax",sesskey:l(r).data("sesskey"),data:JSON.stringify({courseid:o})}}).done(function(o){u.courseProgressBlock.graph.data=o.data}).fail(function(o){console.log(o)}).always(function(){!function(){var o={labels:u.courseProgressBlock.graph.labels,datasets:[{label:u.courseProgressBlock.graph.label,data:u.courseProgressBlock.graph.data,backgroundColor:u.courseProgressBlock.graph.backgroundColor}]};e=new d(u.courseProgressBlock.ctx,{data:o,type:u.courseProgressBlock.graph.type,options:u.courseProgressBlock.graph.options})}(),l(n).addClass("d-none"),l(a).removeClass("d-none")})}l(document).ready(function(o){t(),o(s).on("change",function(){o(a).addClass("d-none"),o(n).removeClass("d-none"),e&&e.destroy(),t()})})}}});