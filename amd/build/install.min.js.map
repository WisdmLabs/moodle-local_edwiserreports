{"version":3,"sources":["install.js"],"names":["define","$","ajax","init","call","methodname","args","pluginname","configname","done","response","success","console","log","document","ready","on","event","preventDefault","submit","positionSelector","currentVal","each","idx","val","push","_this","this","posChangedIdx","name","prevSelectVal","parseInt","currSelectVal","currVal"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,aAAc,SAAUC,EAAGC,GAyE3C,MAAO,CACLC,KAzES,WAEaD,EAAKE,KAAK,CAAC,CAC/BC,WAFc,yCAGdC,KAAM,CACJC,WAAY,uBACZC,WAAY,iCAGA,GAAGC,KAAK,SAAUC,GAC5BA,EAASC,SAEsBT,EAAKE,KAAK,CAAC,CAC1CC,WAFyB,4DAGzBC,KAAM,MAEmB,GAAGG,KAAK,SAAUC,GAC3CE,QAAQC,IAAIH,OAIlBT,EAAEa,UAAUC,MAAM,WAChBd,EAAE,4EAA4Ee,GAAG,QAAS,SAAUC,GAClGA,EAAMC,iBAEgBhB,EAAKE,KAAK,CAAC,CAC/BC,WAFc,yCAGdC,KAAM,CACJC,WAAY,uBACZC,WAAY,iCAGA,GAAGC,KAAK,WACtBR,EAAE,kBAAkBkB,eAI1B,IAAIC,EAAmB,wDACnBC,EAAa,GACjBpB,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GACtCH,EAAWI,KAAKxB,EAAEuB,GAAKA,SAEzBvB,EAAEmB,GAAkBJ,GAAG,SAAU,WAC/B,IAAIU,EAAQC,KAERC,GAAgB,EACpB3B,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GAClCE,EAAMG,MAAQL,EAAIK,OACpBD,EAAgBL,KAIpB,IAAIO,EAAgBC,SAASV,EAAWO,IACpCI,EAAgBD,SAAS9B,EAAE0B,MAAMH,OACrCvB,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GACtC,IAAIS,EAAUF,SAAS9B,EAAEuB,GAAKA,OAE1BE,EAAMG,OAASL,EAAIK,OACjBC,EAAgBE,GAAiBF,EAAgBG,GAAWD,GAAiBC,EAC/EhC,EAAEuB,GAAKA,IAAIO,SAASE,GAAW,GACtBH,EAAgBE,GAAiBF,EAAgBG,GAAWD,GAAiBC,GACtFhC,EAAEuB,GAAKA,IAAIO,SAASE,GAAW,MAIrCZ,EAAa,GACbpB,EAAEmB,GAAkBE,KAAK,SAAUC,EAAKC,GACtCH,EAAWI,KAAKxB,EAAEuB,GAAKA","sourcesContent":["/* eslint-disable no-console */\r\ndefine(['jquery', 'core/ajax'], function($, ajax) {\r\n    var init = function() {\r\n        var getConfig = 'local_edwiserreports_get_plugin_config';\r\n        var getPluginConfig = ajax.call([\r\n            {\r\n                methodname: getConfig,\r\n                args: {\r\n                    pluginname: 'local_edwiserreports',\r\n                    configname: 'edwiserreportsinstallation'\r\n                }\r\n            }\r\n        ]);\r\n\r\n        getPluginConfig[0].done(function(response) {\r\n            if (response.success) {\r\n                var completeInstallation = 'local_edwiserreports_complete_edwiserreports_installation';\r\n                var completePluginInstallation = ajax.call([\r\n                    {\r\n                        methodname: completeInstallation,\r\n                        args: {}\r\n                    }\r\n                ]);\r\n\r\n                completePluginInstallation[0].done(function(response) {\r\n                    console.log(response);\r\n                });\r\n            }\r\n        });\r\n\r\n        $(document).ready(function() {\r\n            $('#page-admin-setting-manageedwiserreportss #adminsettings [type=\"submit\"]').on('click', function(event) {\r\n                event.preventDefault();\r\n                var setConfig = 'local_edwiserreports_set_plugin_config';\r\n                var setPluginConfig = ajax.call([\r\n                    {\r\n                        methodname: setConfig,\r\n                        args: {\r\n                            pluginname: 'local_edwiserreports',\r\n                            configname: 'edwiserreportsinstallation'\r\n                        }\r\n                    }\r\n                ]);\r\n\r\n                setPluginConfig[0].done(function() {\r\n                    $('#adminsettings').submit();\r\n                });\r\n            });\r\n        });\r\n\r\n        var positionSelector = 'select[id ^=id_s_local_edwiserreports][id $=position]';\r\n\r\n        var currentVal = [];\r\n        $(positionSelector).each(function(idx, val) {\r\n            currentVal.push($(val).val());\r\n        });\r\n\r\n        $(positionSelector).on('change', function() {\r\n            var _this = this;\r\n            var posChangedIdx = false;\r\n            $(positionSelector).each(function(idx, val) {\r\n                if (_this.name == val.name) {\r\n                    posChangedIdx = idx;\r\n                    return;\r\n                }\r\n            });\r\n\r\n            var prevSelectVal = parseInt(currentVal[posChangedIdx]);\r\n            var currSelectVal = parseInt($(this).val());\r\n\r\n            $(positionSelector).each(function(idx, val) {\r\n                var currVal = parseInt($(val).val());\r\n                if (_this.name !== val.name) {\r\n                    if (prevSelectVal > currSelectVal && prevSelectVal > currVal && currSelectVal <= currVal) {\r\n                        $(val).val(parseInt(currVal) + 1);\r\n                    } else if (prevSelectVal < currSelectVal && prevSelectVal < currVal && currSelectVal >= currVal) {\r\n                        $(val).val(parseInt(currVal) - 1);\r\n                    }\r\n                }\r\n            });\r\n\r\n            currentVal = [];\r\n            $(positionSelector).each(function(idx, val) {\r\n                currentVal.push($(val).val());\r\n            });\r\n        });\r\n    };\r\n\r\n    return {\r\n        init: init\r\n    };\r\n});\r\n"],"file":"install.min.js"}