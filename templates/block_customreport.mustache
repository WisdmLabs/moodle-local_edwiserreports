<div id="customReportBlock" data-sesskey="{{sesskey}}">
    <div class="panel h-auto mb-0">
        <div class="panel-header clearfix">
            <div class="panel-title px-0">
                <strong>
                    {{#str}} downloadcustomtreport, report_elucidsitereport {{/str}}
                </strong>
            </div>
        </div>
        <div class="panel-body p-0">
            <table class="wdmCustomReportsFilters">
                <tr>
                    <td>
                        <b>{{#str}} selectreporttype, report_elucidsitereport {{/str}} :</b>
                    </td>
                    {{! Dropdown to get reports type }}
                    <td class="dropdown">
                        <button type="button"
                                class="btn btn-default dropdown-toggle mb-5"
                                id="customReportDrodown"
                                data-toggle="dropdown"
                                aria-expanded="true"
                                data-val="course">
                                {{#str}} selectreporttype, report_elucidsitereport {{/str}}
                        </button>
                        <div class="dropdown-menu"
                             aria-labelledby="customReportDrodown"
                             role="menu"
                             x-placement="top-start">
                            <a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-val="courses">
                                {{#str}} courses, report_elucidsitereport {{/str}}
                            </a>
                            {{#haslppluign}}
                            <a class="dropdown-item" href="javascript:void(0)" role="menuitem" data-val="lps">
                                {{#str}} learningprograms, report_elucidsitereport {{/str}}
                            </a>
                            {{/haslppluign}}
                        </div>
                    </td>
                </tr>
                <tr class="enrol-selector" style="display: none;">
                    <td>
                        <b>{{#str}} enrolmentstartdate, report_elucidsitereport {{/str}} :</b>
                    </td>
                    <td>
                        {{! Flatpicker to start date }}
                        <div class="form-group mb-0">
                            <div class="input-search input-search-dark">
                                <input type="text" id="wdmCustomReportEnrolStart" placeholder="{{#str}} enrolmentstartdate, report_elucidsitereport{{/str}}" class="custom-flatpicker form-control rounded w-200" data-input/>
                                <button type="button" class="input-search-close icon wb-close" aria-label="Close"></button>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="enrol-selector" style="display: none;">
                    <td>
                        <b>{{#str}} enrolmentenddate, report_elucidsitereport {{/str}} :</b>
                    </td>
                    <td>
                        {{! Flatpicker to end date }}
                        <div class="form-group mb-0">
                            <div class="input-search input-search-dark">
                                <input type="text" id="wdmCustomReportEnrolEnd" placeholder="{{#str}} enrolmentenddate, report_elucidsitereport{{/str}}" class="custom-flatpicker form-control rounded w-200" data-input/>
                                <button type="button" class="input-search-close icon wb-close" aria-label="Close"></button>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>

            {{! Actual panel body }}
            <div class="rootContainer" style="display: none;">
                <div class="customReportSelectors mt-10">
                    {{! Course table }}
                    <table class="table course-table w-full">
                        <thead>
                            <th class="bg-secondary">
                                <span class="checkbox-custom"><input type="checkbox" name="selectAllCustom"><label class="selectAllCustomReports" for="selectAllCustom"></label></span>
                            </th>
                            <th class="bg-secondary">
                                {{#str}} name , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} shortname , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} category , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} startdate , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} enddate , report_elucidsitereport {{/str}}
                            </th>
                        </thead>
                        <tbody></tbody>
                    </table>

                    {{! Leanring Program }}
                    <table class="table lp-table w-full">
                        <thead>
                            <th class="bg-secondary">
                                <span class="checkbox-custom"><input type="checkbox" name="selectAllCustom"><label class="selectAllCustomReports" for="selectAllCustom"></label></span>
                            </th>
                            <th class="bg-secondary">
                                {{#str}} name , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} shortname , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} startdate , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} enddate , report_elucidsitereport {{/str}}
                            </th>
                            <th class="bg-secondary">
                                {{#str}} duration , report_elucidsitereport {{/str}}
                            </th>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="text-right mt-30">
                    <form action="{{downloadurl}}" target="_blank" method="post" id="customReportsForm">
                        <input type="hidden" name="enrolstartdate"/>
                        <input type="hidden" name="enrolenddate"/>
                        <input type="hidden" name="reporttype"/>
                        <input type="hidden" name="filters"/>
                        <button type="submit" id="customReportDownload" class="btn btn-secondary">
                            {{#str}} downloadreportincsv , report_elucidsitereport {{/str}}
                        </button>
                    </form>
                </div>
            </div>
            <div id="errorMsg" class="alert alert-danger fade hide mt-10" role="alert">
                {{#str}} customreportselectfailed, report_elucidsitereport {{/str}}
            </div>
        </div>
    </div>
</div>

{{#js}}
require(['report_elucidsitereport/block_customreports'], function () {
    Breakpoints();
});
{{/js}}