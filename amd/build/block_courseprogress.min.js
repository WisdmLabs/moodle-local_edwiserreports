"use strict";define(["jquery","core/chartjs","local_edwiserreports/defaultconfig","local_edwiserreports/variables","./common","local_edwiserreports/select2"],function(e,r,o,a,s){return{init:function(t){var l=null,n=o.getPanel("#courseprogressblock"),c=o.getPanel("#courseprogressblock","body"),d=c+" #wdm-courseprogress-select",i=c+" .ct-chart",p=c+" .loader",u=n+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",g=!1,f=e(n+" form.download-links");function h(){var c=e(d).val();o.changeExportUrl(c,u,a.filterReplaceFlag),f.find('input[name="filter"]').val(c),l&&l.destroy(),s.loader.show("#courseprogressblock"),e.ajax({url:o.requestUrl,type:o.requestType,dataType:o.requestDataType,data:{action:"get_courseprogress_graph_data_ajax",sesskey:e(n).data("sesskey"),data:JSON.stringify({courseid:c})}}).done(function(e){g.graph.data=e.data}).fail(function(e){console.log(e)}).always(function(){var o;o={labels:g.graph.labels,datasets:[{label:g.graph.label,data:g.graph.data,backgroundColor:g.graph.backgroundColor}]},l=new r(g.ctx,{data:o,type:g.graph.type,options:g.graph.options}),e(p).hide(),e(i).fadeIn("slow"),t("courseProgress"),s.loader.hide("#courseprogressblock")})}e(document).ready(function(e){(g=o.getCourseProgressBlock())?(h(),e(c+" .singleselect").select2(),e(d).on("change",function(){e(i).hide(),e(p).show(),h()})):t("courseProgress")})}}});
//# sourceMappingURL=block_courseprogress.min.js.map
