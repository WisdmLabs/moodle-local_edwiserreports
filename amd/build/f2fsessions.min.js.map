{"version":3,"sources":["f2fsessions.js"],"names":["define","$","ModalFactory","ModalEvents","Fragment","Templates","V","init","CONTEXTID","PageId","F2fTable","loader","sesskey","data","cohortId","getF2fSessions","ajax","url","requestUrl","type","requestType","dataType","requestDataType","action","JSON","stringify","cohortid","done","response","context","render","then","html","js","replaceNode","fail","ex","console","log","always","show","hide","error","document","ready","cohortFilterBtn","on","this","changeExportUrl","exportUrlLink","cohortReplaceFlag","text"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,qBAAsB,oBAAqB,gBAAiB,iBAAkB,iCAAkC,+BAAgC,SAAUC,EAAGC,EAAcC,EAAaC,EAAUC,EAAWC,GAkE7N,MAAO,CACLC,KA9DF,SAAcC,GAGZ,IAAIC,EAAS,8BACTC,EAAWD,EAAS,UACpBE,EAASF,EAAS,WAClBG,EAAUX,EAAEQ,GAAQI,KAAK,WAEzBC,EAAW,EAQf,SAASC,EAAeD,GACtBb,EAAEe,KAAK,CACLC,IAAKX,EAAEY,WACPC,KAAMb,EAAEc,YACRC,SAAUf,EAAEgB,gBACZT,KAAM,CACJU,OAAQ,2BACRX,QAASA,EACTC,KAAMW,KAAKC,UAAU,CACnBC,SAAUZ,OAGba,KAAK,SAAUC,GAChB,IAAIC,EAAUD,EAASf,KACvBgB,EAAQjB,QAAUA,EAElBP,EAAUyB,OAAO,mCAAoCD,GAASE,KAAK,SAAUC,EAAMC,GACjF5B,EAAU6B,YAAYzB,EAAQuB,EAAMC,KAEnCE,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,KACXG,OAAO,WACRtC,EAAES,GAAU8B,OACZvC,EAAEU,GAAQ8B,WAEXN,KAAK,SAAUO,GAChBL,QAAQC,IAAII,KAIhBzC,EAAE0C,UAAUC,MAAM,WAChB7B,EAAeD,GAGfb,EAxCqB4C,iDAwCDC,GAAG,QAAS,WAC9B7C,EAAES,GAAU+B,OACZxC,EAAEU,GAAQ6B,OACV1B,EAAWb,EAAE8C,MAAMlC,KAAK,YACxBP,EAAE0C,gBAAgBlC,EAAUR,EAAE2C,cAAe3C,EAAE4C,mBAC/CjD,EA9CkB,iBA8CC+B,KAAK/B,EAAE8C,MAAMI,QAChCpC,EAAeD","sourcesContent":["/* eslint-disable no-console */\r\ndefine([\r\n    'jquery',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/fragment',\r\n    'core/templates',\r\n    'local_edwiserreports/variables',\r\n    'local_edwiserreports/common'\r\n], function(\r\n    $,\r\n    ModalFactory,\r\n    ModalEvents,\r\n    Fragment,\r\n    Templates,\r\n    V\r\n) {\r\n    /**\r\n     * Initialize\r\n     * @param {integer} CONTEXTID Current page context id\r\n     */\r\n    function init(CONTEXTID) {\r\n        // eslint-disable-next-line no-unused-vars\r\n        CONTEXTID = null;\r\n        var PageId = \"#wdm-f2fsessions-individual\";\r\n        var F2fTable = PageId + \" .table\";\r\n        var loader = PageId + \" .loader\";\r\n        var sesskey = $(PageId).data(\"sesskey\");\r\n\r\n        // Varibales for cohort filter\r\n        var cohortId = 0;\r\n        var cohortFilterBtn = \"#cohortfilter\";\r\n        var cohortFilterItem = cohortFilterBtn + \" ~ .dropdown-menu .dropdown-item\";\r\n\r\n        /**\r\n         * Get face 2 faqce sessions\r\n         * @param {Number} cohortId Cohort id\r\n         */\r\n        function getF2fSessions(cohortId) {\r\n            $.ajax({\r\n                url: V.requestUrl,\r\n                type: V.requestType,\r\n                dataType: V.requestDataType,\r\n                data: {\r\n                    action: 'get_f2fsession_data_ajax',\r\n                    sesskey: sesskey,\r\n                    data: JSON.stringify({\r\n                        cohortid: cohortId\r\n                    })\r\n                },\r\n            })\r\n                .done(function(response) {\r\n                    var context = response.data;\r\n                    context.sesskey = sesskey;\r\n\r\n                    // eslint-disable-next-line promise/catch-or-return\r\n                    Templates.render('local_edwiserreports/f2fsessions', context)\r\n                    .then(function(html, js) {\r\n                        Templates.replaceNode(PageId, html, js);\r\n                        return;\r\n                    }).fail(function(ex) {\r\n                        console.log(ex);\r\n                    }).always(function() {\r\n                        $(F2fTable).show();\r\n                        $(loader).hide();\r\n                    });\r\n                })\r\n                .fail(function(error) {\r\n                    console.log(error);\r\n                });\r\n        }\r\n\r\n        $(document).ready(function() {\r\n            getF2fSessions(cohortId);\r\n\r\n            /* Select cohort filter for active users block */\r\n            $(cohortFilterItem).on('click', function() {\r\n                $(F2fTable).hide();\r\n                $(loader).show();\r\n\r\n                cohortId = $(this).data('cohortid');\r\n                V.changeExportUrl(cohortId, V.exportUrlLink, V.cohortReplaceFlag);\r\n                $(cohortFilterBtn).html($(this).text());\r\n                getF2fSessions(cohortId);\r\n            });\r\n        });\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n\r\n});\r\n"],"file":"f2fsessions.min.js"}