define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/select2","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4","report_elucidsitereport/jquery-asPieProgress"],function(c,e,t,a,r,u){return{init:function(e){var r=c("#wdm-certificates-individual"),o=r.find(".table"),t=(r.find(".loader"),c("#wdm-certificates-dropdown")),a="#wdm-certificates-select",i=(r.find(".dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item"),c("#wdm-userfilter .row .col-6:first-child")),d=null,s=null,l="#cohortfilter";function n(e,t){var a={action:"get_certificates_data_ajax",sesskey:c(r).data("sesskey"),data:JSON.stringify({certificateid:e,cohortid:t})};d&&d.destroy(),d=o.DataTable({ajax:u.generateUrl(u.requestUrl,a),dom:"<'pull-left'f><t><p>",columnDefs:[{targets:0,className:"align-middle"},{targets:1,className:"align-middle"},{targets:"_all",className:"align-middle text-center"}],columns:[{data:"username"},{data:"email"},{data:"issuedate"},{data:"dateenrolled"},{data:"grade"},{data:"courseprogress"}],oLanguage:{sEmptyTable:"No certificates are awarded"},initComplete:function(e,t){c(".pie-progress").asPieProgress(),o.show()},bInfo:!1,lengthChange:!1})}c(document).ready(function(){i.html(t.html()),c(document).find(a).select2(),c(document).find(a).show(),t.remove(),n(s=c(a).val()),c("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",function(){cohortId=c(this).data("cohortid"),c(l).html(c(this).text()),n(s,cohortId)}),c(document).on("change",a,function(){n(c(this).val())})})}}});