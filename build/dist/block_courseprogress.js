define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig","report_elucidsitereport/select2"],function(d,g,u){return{init:function(){var o=null,r=u.getPanel("#courseprogressblock"),s=u.getPanel("#courseprogressblock","body"),a=(u.getPanel("#courseprogressblock","header"),u.getPanel("#courseprogressblock","footer"),s+" #wdm-courseprogress-select"),t=s+" .ct-chart",c=s+" .loader",l=r+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item";function n(){var e=d(a).val();u.changeExportUrl(e,l,V.filterReplaceFlag),d.ajax({url:u.requestUrl,type:"GET",dataType:"json",data:{action:"get_courseprogress_graph_data_ajax",sesskey:d(r).data("sesskey"),data:JSON.stringify({courseid:e})}}).done(function(e){u.courseProgressBlock.graph.data=e.data}).fail(function(e){console.log(e)}).always(function(){!function(){var e={labels:u.courseProgressBlock.graph.labels,datasets:[{label:u.courseProgressBlock.graph.label,data:u.courseProgressBlock.graph.data,backgroundColor:u.courseProgressBlock.graph.backgroundColor}]};o=new g(u.courseProgressBlock.ctx,{data:e,type:u.courseProgressBlock.graph.type,options:u.courseProgressBlock.graph.options})}(),d(c).addClass("d-none"),d(t).removeClass("d-none")})}d(document).ready(function(e){n(),e(s+" .singleselect").select2(),e(a).on("change",function(){e(t).addClass("d-none"),e(c).removeClass("d-none"),o&&o.destroy(),n()})})}}});