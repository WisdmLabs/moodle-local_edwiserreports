define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig"],function(c,d,r){return{init:function(){var e=null,t=r.getPanel("#lpstatsblock"),a=r.getPanel("#lpstatsblock","body"),l=(r.getPanel("#lpstatsblock","title"),a+" #wdm-lpstats-select"),s=a+" .ct-chart",o=a+" .loader";function n(a){c.ajax({url:r.requestUrl,type:r.requestType,dataType:r.requestDataType,sesskey:c(t).data("sesskey"),data:{action:"get_lpstats_data_ajax",sesskey:c(t).data("sesskey"),data:JSON.stringify({lpid:a})}}).done(function(a){!function(a){r.lpStatsBlock.graph.labels=a.labels,r.lpStatsBlock.graph.data=a.data;var t={labels:r.lpStatsBlock.graph.labels,datasets:[{data:r.lpStatsBlock.graph.data,backgroundColor:r.lpStatsBlock.graph.backgroundColor}]};e=new d(r.lpStatsBlock.ctx,{data:t,type:r.lpStatsBlock.graph.type,options:r.lpStatsBlock.graph.options})}(a.data)}).fail(function(a){console.log(a)}).always(function(){c(o).addClass("d-none"),c(s).removeClass("d-none")})}c(document).ready(function(){n(c(l).val()),c(l).on("change",function(){c(s).addClass("d-none"),c(o).removeClass("d-none"),e.destroy(),n(c(this).val())})})}}});