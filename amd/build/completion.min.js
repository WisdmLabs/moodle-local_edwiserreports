define(["jquery","local_sitereport/variables","local_sitereport/common"],(function(t,a){return{init:function(e){var o=t("#wdm-completion-individual"),i=o.find(".table"),n=o.find(".loader"),r=null,l=0;function s(e,l){r&&(r.destroy(),i.hide(),n.show());var s={action:"get_completion_data_ajax",sesskey:o.data("sesskey"),data:JSON.stringify({courseid:e,cohortid:l})},d=a.generateUrl(a.requestUrl,s);i.show(),r=i.DataTable({ajax:d,oLanguage:{sEmptyTable:"No users are enrolled as student"},columns:[{data:"username"},{data:"enrolledon"},{data:"enrolltype"},{data:"noofvisits"},{data:"completion"},{data:"compleiontime"},{data:"grade"},{data:"lastaccess"}],drawCallback:function(){t(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),t(".dataTables_filter").addClass("pagination-sm pull-right")},columnDefs:[{className:"text-left",targets:0},{className:"text-left",targets:1},{className:"text-center",targets:"_all"}],initComplete:function(){t(n).hide()},bInfo:!1})}t(document).ready((function(){var e=a.getUrlParameter("courseid");s(e,l),t(a.cohortFilterItem).on("click",(function(){l=t(this).data("cohortid"),t(a.cohortFilterBtn).html(t(this).text()),a.changeExportUrl(l,a.exportUrlLink,a.cohortReplaceFlag),s(e,l)}))}))}}}));