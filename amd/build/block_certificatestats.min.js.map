{"version":3,"sources":["block_certificatestats.js"],"names":["define","$","templates","cfg","common","panel","getPanel","panelBody","table","dropdownBody","init","hideLoader","loader","hide","length","show","ajax","url","requestUrl","type","requestType","dataType","requestDataType","data","action","sesskey","done","response","render","then","html","js","empty","appendNodeContents","DataTable","oLanguage","sEmptyTable","sSearchPlaceholder","initComplete","drawCallback","addClass","lengthChange","bInfo","fail","ex","console","log","error"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,iBAAkB,qCAAsC,YAAa,SAAUC,EAAGC,EAAWC,EAAKC,GAClH,IAAIC,EAAQF,EAAIG,SAAS,sBACrBC,EAAYJ,EAAIG,SAAS,qBAAsB,QAC/CE,EAAQH,EAAQ,UAChBI,EAAeJ,EAAQ,mBAoE3B,MAAO,CACLK,KAhEF,WAIE,SAASC,IACPP,EAAOQ,OAAOC,KAAK,sBAGjBZ,EAAEI,GAAOS,SAEXV,EAAOQ,OAAOG,KAAK,sBACnBd,EAAEe,KAAK,CACLC,IAAKd,EAAIe,WACTC,KAAMhB,EAAIiB,YACVC,SAAUlB,EAAImB,gBACdC,KAAM,CACJC,OAAQ,6BACRC,QAASxB,EAAEI,GAAOkB,KAAK,cAExBG,KAAK,SAAUC,GAChBzB,EAAU0B,OAAO,yCAA0CD,EAASJ,MAAMM,KAAK,SAAUC,EAAMC,GAC7F9B,EAAEM,GAAWyB,QACb9B,EAAU+B,mBAAmB1B,EAAWuB,EAAMC,GACtBJ,EAASJ,KAsBvCtB,EAAEO,GAAO0B,UAAU,CACjBC,UAAW,CACTC,YAAa,kCACbC,mBAAoB,uBAEtBC,aAAc,WACZrC,EAAEQ,GAAcM,QAElBwB,aAAc,WACZtC,EAAE,sCAAsCuC,SAAS,4BACjDvC,EAAE,sBAAsBuC,SAAS,6BAEnCC,cAAc,EACdC,OAAO,IAjCH/B,MAECgC,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,GAEZjC,QAEDgC,KAAK,SAAUI,GAChBF,QAAQC,IAAIC,GAEZpC","sourcesContent":["/* eslint-disable no-console */\r\ndefine([\r\n    \"jquery\",\r\n    \"core/templates\",\r\n    \"local_edwiserreports/defaultconfig\",\r\n    './common',\r\n], function($, templates, cfg, common) {\r\n    var panel = cfg.getPanel(\"#certificatesblock\");\r\n    var panelBody = cfg.getPanel(\"#certificatesblock\", \"body\");\r\n    var table = panel + \" .table\";\r\n    var dropdownBody = panel + \" .table-dropdown\";\r\n\r\n    /**\r\n     * Initialize\r\n     */\r\n    function init() {\r\n        /**\r\n         * Hide loader/\r\n         */\r\n        function hideLoader() {\r\n            common.loader.hide('#certificatesblock');\r\n        }\r\n\r\n        if ($(panel).length) {\r\n            // Show loader.\r\n            common.loader.show('#certificatesblock');\r\n\r\n            $.ajax({\r\n                url: cfg.requestUrl,\r\n                type: cfg.requestType,\r\n                dataType: cfg.requestDataType,\r\n                data: {\r\n                    action: 'get_certificates_data_ajax',\r\n                    sesskey: $(panel).data(\"sesskey\")\r\n                },\r\n            }).done(function(response) {\r\n                templates.render('local_edwiserreports/certificatestable', response.data)\r\n                    .then(function(html, js) {\r\n                        $(panelBody).empty();\r\n                        templates.appendNodeContents(panelBody, html, js);\r\n                        createCertificatesTable(response.data);\r\n\r\n                        // Hide loader.\r\n                        hideLoader();\r\n                        return;\r\n                    }).fail(function(ex) {\r\n                        console.log(ex);\r\n\r\n                        // Hide loader.\r\n                        hideLoader();\r\n                    });\r\n            })\r\n            .fail(function(error) {\r\n                console.log(error);\r\n\r\n                // Hide loader.\r\n                hideLoader();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create certificate table.\r\n     */\r\n    function createCertificatesTable() {\r\n        $(table).DataTable({\r\n            oLanguage: {\r\n                sEmptyTable: \"There is no certificate created\",\r\n                sSearchPlaceholder: \"Search Certificates\"\r\n            },\r\n            initComplete: function() {\r\n                $(dropdownBody).show();\r\n            },\r\n            drawCallback: function() {\r\n                $('.dataTables_paginate > .pagination').addClass('pagination-sm pull-right');\r\n                $('.dataTables_filter').addClass('pagination-sm pull-right');\r\n            },\r\n            lengthChange: false,\r\n            bInfo: false\r\n        });\r\n    }\r\n\r\n    // Must return the init function\r\n    return {\r\n        init: init\r\n    };\r\n});\r\n"],"file":"block_certificatestats.min.js"}