define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig"],function(s,r,c){return{init:function(){var l=null,a=c.getPanel("#lpstatsblock","body"),t=(c.getPanel("#lpstatsblock","title"),a+" #wdm-lpstats-select"),e=a+" .ct-chart",o=a+" .loader";function n(a){s.ajax({url:c.requestUrl,type:c.requestType,dataType:c.requestDataType,data:{action:"get_lpstats_data_ajax",data:JSON.stringify({lpid:a})}}).done(function(a){!function(a){c.lpStatsBlock.graph.labels=a.labels,c.lpStatsBlock.graph.data=a.data;var t={labels:c.lpStatsBlock.graph.labels,datasets:[{data:c.lpStatsBlock.graph.data,backgroundColor:c.lpStatsBlock.graph.backgroundColor}]};l=new r(c.lpStatsBlock.ctx,{data:t,type:c.lpStatsBlock.graph.type,options:c.lpStatsBlock.graph.options})}(a.data)}).fail(function(a){console.log(a)}).always(function(){s(o).addClass("d-none"),s(e).removeClass("d-none")})}s(document).ready(function(){n(s(t).val()),s(t).on("change",function(){s(e).addClass("d-none"),s(o).removeClass("d-none"),l.destroy(),n(s(this).val())})})}}});