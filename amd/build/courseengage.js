define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4"],function(l,u,m,g,e,h){return{init:function(r){var e="#wdm-courseengage-individual",t=e+" .table",o=e+" .loader",a=l(e).data("sesskey"),i=h.requestUrl+"?action=get_courseengage_data_ajax&sesskey="+a,d=null,n="#cohortfilter",c=0;function s(e){console.log(i+"&cohortid="+e),d=l(t).DataTable({ajax:i+"&cohortid="+e,columns:[{data:"coursename"},{data:"enrolment"},{data:"visited"},{data:"activitystart"},{data:"completedhalf"},{data:"coursecompleted"}],columnDefs:[{className:"text-left",targets:0},{className:"text-center modal-trigger",targets:"_all"}],initComplete:function(){l(t).show(),l(o).hide()}})}l(document).ready(function(){s(c),l(document).on("click","#cohortfilter ~ .dropdown-menu .dropdown-item",function(){d&&(d.destroy(),l(t).hide(),l(o).show()),c=l(this).data("cohortid"),l(n).html(l(this).text()),s(c)}),l(document).on("click","#wdm-courseengage-individual .table a.modal-trigger",function(){var e=l(this).data("action"),t=l(this).data("courseid"),o=l(this).data("coursename"),a=null;u.create({body:g.loadFragment("report_elucidsitereport","userslist",r,{page:"courseengage",courseid:t,action:e,cohortid:c})}).then(function(e){a=e.getRoot(),e.setTitle(o),e.show(),a.on(m.hidden,function(){e.destroy()})})})})}}});