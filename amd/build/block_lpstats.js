define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig","report_elucidsitereport/variables","report_elucidsitereport/select2"],function(i,p,u,g){return{init:function(){var t=null,a=u.getPanel("#lpstatsblock"),s=u.getPanel("#lpstatsblock","body"),l=(u.getPanel("#lpstatsblock","title"),s+" #wdm-lpstats-select"),o=a+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",n=s+" .ct-chart",r=s+" .loader",d=!1;function c(e){i.ajax({url:u.requestUrl,type:u.requestType,dataType:u.requestDataType,sesskey:i(a).data("sesskey"),data:{action:"get_lpstats_data_ajax",sesskey:i(a).data("sesskey"),data:JSON.stringify({lpid:e})}}).done(function(e){!function(e){if(d){d.graph.labels=e.labels,d.graph.data=e.data;var a={labels:d.graph.labels,datasets:[{data:d.graph.data,backgroundColor:d.graph.backgroundColor}]};t=new p(d.ctx,{data:a,type:d.graph.type,options:d.graph.options})}}(e.data)}).fail(function(e){console.log(e)}).always(function(){i(r).addClass("d-none"),i(n).removeClass("d-none")})}i(document).ready(function(){var e=i(l).val();(d=u.getLpStatsBlock())&&(c(e),i(s+" .singleselect").select2(),i(l).on("change",function(){e=i(this).val(),i(n).addClass("d-none"),i(r).removeClass("d-none"),u.changeExportUrl(e,o,g.filterReplaceFlag),t.destroy(),c(e)}))})}}});