define(["jquery","local_sitereport/variables","local_sitereport/common"],(function(a,t){return{init:function(e){var n=a("#wdm-completion-individual"),o=n.find(".table"),l=n.find(".loader"),i=null,s=0;function d(e,s){i&&(i.destroy(),o.hide(),l.show());var d={action:"get_completion_data_ajax",sesskey:n.data("sesskey"),data:JSON.stringify({courseid:e,cohortid:s})},r=t.generateUrl(t.requestUrl,d);o.show(),i=o.DataTable({ajax:r,oLanguage:{sEmptyTable:"No users are enrolled as student",sSearchPlaceholder:"Search Completion"},columns:[{data:"username"},{data:"enrolledon"},{data:"enrolltype"},{data:"noofvisits"},{data:"completion"},{data:"compleiontime"},{data:"grade"},{data:"lastaccess"}],drawCallback:function(){a(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),a(".dataTables_filter").addClass("pagination-sm pull-right")},columnDefs:[{className:"text-left",targets:0},{className:"text-left",targets:1},{className:"text-center",targets:"_all"}],initComplete:function(){a(l).hide()},bInfo:!1})}a(document).ready((function(){var e=a(n).find('.download-links input[name="filter"]').val();d(e,s),a(t.cohortFilterItem).on("click",(function(){s=a(this).data("cohortid"),a(t.cohortFilterBtn).html(a(this).text()),a(n).find('.download-links input[name="cohortid"]').val(s),d(e,s)}))}))}}}));