define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/select2","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4","report_elucidsitereport/jquery-asPieProgress","report_elucidsitereport/common"],(function(e,t,r,a,o,l){return{init:function(t){var r=e("#wdm-certificates-individual"),a=r.find(".table"),o=(r.find(".loader"),e("#wdm-certificates-dropdown")),i="#wdm-certificates-select",s=".dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",d=e("#wdm-userfilter .row .col-md-6:first-child"),c=null,n=null,m=0;function p(t,o){var i={action:"get_certificates_data_ajax",sesskey:e(r).data("sesskey"),data:JSON.stringify({certificateid:t,cohortid:o})};c&&c.destroy(),c=a.DataTable({ajax:l.generateUrl(l.requestUrl,i),dom:"<'pull-left'f><t><p>",columnDefs:[{targets:0,className:"align-middle"},{targets:1,className:"align-middle"},{targets:"_all",className:"align-middle text-center"}],columns:[{data:"username"},{data:"email"},{data:"issuedate"},{data:"dateenrolled"},{data:"grade"},{data:"courseprogress"}],language:{searchPlaceholder:"Search users",emptyTable:"No certificates are awarded"},initComplete:function(t,r){e(".pie-progress").asPieProgress(),a.show()},bInfo:!1,lengthChange:!1,paginate:!1,responsive:!0,scrollY:"350px",scrollX:!0,sScrollX:"100%",bScrollCollapse:!0})}e(document).ready((function(){d.html(o.html()),o.remove(),e(document).find(i).show(),e(document).find(i).select2(),p(n=e(i).val()),e("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",(function(){m=e(this).data("cohortid"),l.changeExportUrl(m,s,l.cohortReplaceFlag),e("#cohortfilter").html(e(this).text()),p(n,m)})),e(document).on("change",i,(function(){p(n=e(this).val()),console.log(n),l.changeExportUrl(n,s,l.filterReplaceFlag)}))}))}}}));