<<<<<<< HEAD
{"version":3,"sources":["block_todaysactivity.js"],"names":["define","$","Chart","cfg","common","init","notifyListner","todaysVisits","panel","getPanel","panelBody","flatpickrCalender","getTodaysActivity","date","loader","show","sesskey","data","ajax","url","requestUrl","type","requestType","dataType","requestDataType","action","JSON","stringify","done","response","each","indx","el","find","html","visitshour","todaysActivityBlock","graph","labels","datasets","label","labelName","backgroundColor","destroy","ctx","options","fail","error","console","log","always","hide","document","ready","getTodaysActivityBlock","flatpickr","dateFormat","maxDate","defaultDate","onChange","selectedDates","dateStr","instance"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,eAAgB,qCAAsC,YAAa,SAAUC,EAAGC,EAAOC,EAAKC,GAsH5G,MAAO,CACLC,KAlHF,SAAcC,GAEZ,IAAIC,EACAC,EAAQL,EAAIM,SAAS,wBACrBC,EAAYP,EAAIM,SAAS,uBAAwB,QACjDE,EAAoBH,EAAQ,sBAmChC,SAASI,EAAkBC,GAEzBT,EAAOU,OAAOC,KAAK,wBAEnB,IAAIC,EAAUf,EAAEO,GAAOS,KAAK,WAE5BhB,EAAEiB,KAAK,CACLC,IAAKhB,EAAIiB,WACTC,KAAMlB,EAAImB,YACVC,SAAUpB,EAAIqB,gBACdP,KAAM,CACJQ,OAAQ,+BACRT,QAASA,EACTC,KAAMS,KAAKC,UAAU,CACnBd,KAAMA,OAGTe,KAAK,SAAUC,GA0BpB,IAAmCZ,EArB/BhB,EAAE6B,KAAKD,EAASZ,KAAM,SAAUc,EAAMC,GACtB/B,EAAES,EAAY,YAAcqB,GAClCE,KAAK,SAASC,KAAKF,KAmBEf,EAfLY,EAASZ,KAAKkB,WAiB1ChC,EAAIiC,oBAAoBC,MAAMpB,KAAOA,EACrCA,EAAO,CACLqB,OAAQnC,EAAIiC,oBAAoBC,MAAMC,OACtCC,SAAU,CAAC,CACTC,MAAOrC,EAAIiC,oBAAoBC,MAAMI,UACrCxB,KAAMd,EAAIiC,oBAAoBC,MAAMpB,KACpCyB,gBAAiBvC,EAAIiC,oBAAoBC,MAAMK,mBAQ/CnC,GACFA,EAAaoC,UAIfpC,EAAe,IAAIL,EAAMC,EAAIiC,oBAAoBQ,IAAK,CACpDvB,KAAMlB,EAAIiC,oBAAoBC,MAAMhB,KACpCwB,QAAS1C,EAAIiC,oBAAoBC,MAAMQ,QACvC5B,KAAMA,MAtCL6B,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,KACXG,OAAO,WACR5C,EAAc,kBAEdF,EAAOU,OAAOqC,KAAK,0BAhEvBlD,EAAEmD,UAAUC,MAAM,WAChBlD,EAAIiC,oBAAsBjC,EAAImD,yBAE1BnD,EAAIiC,qBACNxB,IAMAX,EAAEU,GAAmB4C,UAAU,CAC7BC,WAAY,QACZC,QAAS,QACTC,YAAa,CAAC,SAEdC,SAAU,SAAkBC,EAAeC,EAASC,GAElDlD,EAAkBiD,OAKtBvD,EAAc","sourcesContent":["/* eslint-disable no-console */\r\ndefine([\r\n    'jquery',\r\n    'core/chartjs',\r\n    'local_edwiserreports/defaultconfig',\r\n    './common'\r\n], function($, Chart, cfg, common) {\r\n    /**\r\n     * Initialize\r\n     * @param {function} notifyListner Callback function\r\n     */\r\n    function init(notifyListner) {\r\n        // Global data got todays activity block\r\n        var todaysVisits;\r\n        var panel = cfg.getPanel(\"#todaysactivityblock\");\r\n        var panelBody = cfg.getPanel(\"#todaysactivityblock\", \"body\");\r\n        var flatpickrCalender = panel + \" #flatpickrCalender\";\r\n\r\n        /**\r\n         * On document ready do the bellow stuff\r\n         */\r\n        $(document).ready(function() {\r\n            cfg.todaysActivityBlock = cfg.getTodaysActivityBlock();\r\n\r\n            // If course progress block is there\r\n            if (cfg.todaysActivityBlock) {\r\n                getTodaysActivity();\r\n                /**\r\n                 * Generate flatpicker for\r\n                 * date filter in todays activity block\r\n                 */\r\n                $(flatpickrCalender).flatpickr({\r\n                    dateFormat: \"d M Y\",\r\n                    maxDate: \"today\",\r\n                    defaultDate: [\"today\"],\r\n                    // eslint-disable-next-line no-unused-vars\r\n                    onChange: function(selectedDates, dateStr, instance) {\r\n                        // $(panelBody).find(\"loader\").show();\r\n                        getTodaysActivity(dateStr);\r\n                    }\r\n                });\r\n            } else {\r\n                /* Notify that this event is completed */\r\n                notifyListner(\"todaysActivity\");\r\n            }\r\n        });\r\n\r\n        /**\r\n         * Get Todays activity information\r\n         * @param  {number} date Unix Date\r\n         */\r\n        function getTodaysActivity(date) {\r\n\r\n            // Show loader.\r\n            common.loader.show('#todaysactivityblock');\r\n\r\n            // Get session key\r\n            var sesskey = $(panel).data(\"sesskey\");\r\n\r\n            // Send Ajax call to get todays activity information\r\n            $.ajax({\r\n                url: cfg.requestUrl,\r\n                type: cfg.requestType,\r\n                dataType: cfg.requestDataType,\r\n                data: {\r\n                    action: 'get_todaysactivity_data_ajax',\r\n                    sesskey: sesskey,\r\n                    data: JSON.stringify({\r\n                        date: date\r\n                    })\r\n                }\r\n            })\r\n                .done(function(response) {\r\n                    /**\r\n                     * After getting todays activity information\r\n                     * update the value in todays activity block\r\n                     */\r\n                    $.each(response.data, function(indx, el) {\r\n                        var section = $(panelBody + \" #todays-\" + indx);\r\n                        section.find(\".data\").html(el);\r\n                    });\r\n\r\n                    /* Generate Todays Activity Graph */\r\n                    generateTodaysVisitsGraph(response.data.visitshour);\r\n                })\r\n                .fail(function(error) {\r\n                    console.log(error);\r\n                }).always(function() {\r\n                    notifyListner(\"todaysActivity\");\r\n\r\n                    // Hide loader.\r\n                    common.loader.hide('#todaysactivityblock');\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Generate Todays Activity Graph\r\n         * @param  {object} data Todays activity object\r\n         */\r\n        function generateTodaysVisitsGraph(data) {\r\n            // Prepare data for generating graph\r\n            cfg.todaysActivityBlock.graph.data = data;\r\n            data = {\r\n                labels: cfg.todaysActivityBlock.graph.labels,\r\n                datasets: [{\r\n                    label: cfg.todaysActivityBlock.graph.labelName,\r\n                    data: cfg.todaysActivityBlock.graph.data,\r\n                    backgroundColor: cfg.todaysActivityBlock.graph.backgroundColor\r\n                }]\r\n            };\r\n\r\n            /**\r\n             * If Todays Activity graph is already\r\n             * created then destroy\r\n             */\r\n            if (todaysVisits) {\r\n                todaysVisits.destroy();\r\n            }\r\n\r\n            // Generate Todays Activity Graph\r\n            todaysVisits = new Chart(cfg.todaysActivityBlock.ctx, {\r\n                type: cfg.todaysActivityBlock.graph.type,\r\n                options: cfg.todaysActivityBlock.graph.options,\r\n                data: data\r\n            });\r\n        }\r\n    }\r\n\r\n    // Must return the init function\r\n    return {\r\n        init: init\r\n    };\r\n});\r\n"],"file":"block_todaysactivity.min.js"}
=======
{"version":3,"sources":["block_todaysactivity.js"],"names":["define","$","Chart","cfg","common","init","notifyListner","todaysVisits","panel","getPanel","panelBody","flatpickrCalender","getTodaysActivity","date","loader","show","sesskey","data","ajax","url","requestUrl","type","requestType","dataType","requestDataType","action","JSON","stringify","done","response","each","indx","el","find","html","visitshour","todaysActivityBlock","graph","labels","datasets","label","labelName","backgroundColor","destroy","ctx","options","fail","error","console","log","always","hide","document","ready","getTodaysActivityBlock","flatpickr","dateFormat","maxDate","defaultDate","onChange","selectedDates","dateStr","instance"],"mappings":"AAAA,aA0BAA,OAAO,CAAC,SAAU,eAAgB,qCAAsC,YAAa,SAAUC,EAAGC,EAAOC,EAAKC,GAsH5G,MAAO,CACLC,KAlHF,SAAcC,GAEZ,IAAIC,EACAC,EAAQL,EAAIM,SAAS,wBACrBC,EAAYP,EAAIM,SAAS,uBAAwB,QACjDE,EAAoBH,EAAQ,sBAmChC,SAASI,EAAkBC,GAEzBT,EAAOU,OAAOC,KAAK,wBAEnB,IAAIC,EAAUf,EAAEO,GAAOS,KAAK,WAE5BhB,EAAEiB,KAAK,CACLC,IAAKhB,EAAIiB,WACTC,KAAMlB,EAAImB,YACVC,SAAUpB,EAAIqB,gBACdP,KAAM,CACJQ,OAAQ,+BACRT,QAASA,EACTC,KAAMS,KAAKC,UAAU,CACnBd,KAAMA,OAGTe,KAAK,SAAUC,GA0BpB,IAAmCZ,EArB/BhB,EAAE6B,KAAKD,EAASZ,KAAM,SAAUc,EAAMC,GACtB/B,EAAES,EAAY,YAAcqB,GAClCE,KAAK,SAASC,KAAKF,KAmBEf,EAfLY,EAASZ,KAAKkB,WAiB1ChC,EAAIiC,oBAAoBC,MAAMpB,KAAOA,EACrCA,EAAO,CACLqB,OAAQnC,EAAIiC,oBAAoBC,MAAMC,OACtCC,SAAU,CAAC,CACTC,MAAOrC,EAAIiC,oBAAoBC,MAAMI,UACrCxB,KAAMd,EAAIiC,oBAAoBC,MAAMpB,KACpCyB,gBAAiBvC,EAAIiC,oBAAoBC,MAAMK,mBAQ/CnC,GACFA,EAAaoC,UAIfpC,EAAe,IAAIL,EAAMC,EAAIiC,oBAAoBQ,IAAK,CACpDvB,KAAMlB,EAAIiC,oBAAoBC,MAAMhB,KACpCwB,QAAS1C,EAAIiC,oBAAoBC,MAAMQ,QACvC5B,KAAMA,MAtCL6B,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,KACXG,OAAO,WACR5C,EAAc,kBAEdF,EAAOU,OAAOqC,KAAK,0BAhEvBlD,EAAEmD,UAAUC,MAAM,WAChBlD,EAAIiC,oBAAsBjC,EAAImD,yBAE1BnD,EAAIiC,qBACNxB,IAMAX,EAAEU,GAAmB4C,UAAU,CAC7BC,WAAY,QACZC,QAAS,QACTC,YAAa,CAAC,SAEdC,SAAU,SAAkBC,EAAeC,EAASC,GAElDlD,EAAkBiD,OAKtBvD,EAAc","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Plugin administration pages are defined here.\n *\n * @package     local_edwiserreports\n * @copyright   2021 wisdmlabs <support@wisdmlabs.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/* eslint-disable no-console */\ndefine([\n    'jquery',\n    'core/chartjs',\n    'local_edwiserreports/defaultconfig',\n    './common'\n], function($, Chart, cfg, common) {\n    /**\n     * Initialize\n     * @param {function} notifyListner Callback function\n     */\n    function init(notifyListner) {\n        // Global data got todays activity block\n        var todaysVisits;\n        var panel = cfg.getPanel(\"#todaysactivityblock\");\n        var panelBody = cfg.getPanel(\"#todaysactivityblock\", \"body\");\n        var flatpickrCalender = panel + \" #flatpickrCalender\";\n\n        /**\n         * On document ready do the bellow stuff\n         */\n        $(document).ready(function() {\n            cfg.todaysActivityBlock = cfg.getTodaysActivityBlock();\n\n            // If course progress block is there\n            if (cfg.todaysActivityBlock) {\n                getTodaysActivity();\n                /**\n                 * Generate flatpicker for\n                 * date filter in todays activity block\n                 */\n                $(flatpickrCalender).flatpickr({\n                    dateFormat: \"d M Y\",\n                    maxDate: \"today\",\n                    defaultDate: [\"today\"],\n                    // eslint-disable-next-line no-unused-vars\n                    onChange: function(selectedDates, dateStr, instance) {\n                        // $(panelBody).find(\"loader\").show();\n                        getTodaysActivity(dateStr);\n                    }\n                });\n            } else {\n                /* Notify that this event is completed */\n                notifyListner(\"todaysActivity\");\n            }\n        });\n\n        /**\n         * Get Todays activity information\n         * @param  {number} date Unix Date\n         */\n        function getTodaysActivity(date) {\n\n            // Show loader.\n            common.loader.show('#todaysactivityblock');\n\n            // Get session key\n            var sesskey = $(panel).data(\"sesskey\");\n\n            // Send Ajax call to get todays activity information\n            $.ajax({\n                url: cfg.requestUrl,\n                type: cfg.requestType,\n                dataType: cfg.requestDataType,\n                data: {\n                    action: 'get_todaysactivity_data_ajax',\n                    sesskey: sesskey,\n                    data: JSON.stringify({\n                        date: date\n                    })\n                }\n            })\n                .done(function(response) {\n                    /**\n                     * After getting todays activity information\n                     * update the value in todays activity block\n                     */\n                    $.each(response.data, function(indx, el) {\n                        var section = $(panelBody + \" #todays-\" + indx);\n                        section.find(\".data\").html(el);\n                    });\n\n                    /* Generate Todays Activity Graph */\n                    generateTodaysVisitsGraph(response.data.visitshour);\n                })\n                .fail(function(error) {\n                    console.log(error);\n                }).always(function() {\n                    notifyListner(\"todaysActivity\");\n\n                    // Hide loader.\n                    common.loader.hide('#todaysactivityblock');\n                });\n        }\n\n        /**\n         * Generate Todays Activity Graph\n         * @param  {object} data Todays activity object\n         */\n        function generateTodaysVisitsGraph(data) {\n            // Prepare data for generating graph\n            cfg.todaysActivityBlock.graph.data = data;\n            data = {\n                labels: cfg.todaysActivityBlock.graph.labels,\n                datasets: [{\n                    label: cfg.todaysActivityBlock.graph.labelName,\n                    data: cfg.todaysActivityBlock.graph.data,\n                    backgroundColor: cfg.todaysActivityBlock.graph.backgroundColor\n                }]\n            };\n\n            /**\n             * If Todays Activity graph is already\n             * created then destroy\n             */\n            if (todaysVisits) {\n                todaysVisits.destroy();\n            }\n\n            // Generate Todays Activity Graph\n            todaysVisits = new Chart(cfg.todaysActivityBlock.ctx, {\n                type: cfg.todaysActivityBlock.graph.type,\n                options: cfg.todaysActivityBlock.graph.options,\n                data: data\n            });\n        }\n    }\n\n    // Must return the init function\n    return {\n        init: init\n    };\n});\n"],"file":"block_todaysactivity.min.js"}
>>>>>>> dev
