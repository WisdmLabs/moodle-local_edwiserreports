define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/select2","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4","report_elucidsitereport/jquery-asPieProgress","report_elucidsitereport/common"],(function(e,a,t,r,i,o){return{init:function(a){var t=e("#wdm-certificates-individual"),r=t.find(".table"),i=(t.find(".loader"),e("#wdm-certificates-dropdown"),"#wdm-certificates-select"),l=".dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",d=(e("#wdm-userfilter .row .col-md-6:first-child"),null),s=null,n=0;function c(a,i){var l={action:"get_certificates_data_ajax",sesskey:e(t).data("sesskey"),data:JSON.stringify({certificateid:a,cohortid:i})};d&&d.destroy(),d=r.DataTable({ajax:o.generateUrl(o.requestUrl,l),columnDefs:[{targets:0,className:"align-middle"},{targets:1,className:"align-middle"},{targets:"_all",className:"align-middle text-center"}],columns:[{data:"username"},{data:"email"},{data:"issuedate"},{data:"dateenrolled"},{data:"grade"},{data:"courseprogress"}],language:{searchPlaceholder:"Search users",emptyTable:"No certificates are awarded"},initComplete:function(a,t){e(".pie-progress").asPieProgress(),r.show()},drawCallback:function(){e(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),e(".dataTables_filter").addClass("pagination-sm pull-right")},bInfo:!1,paginate:!1,responsive:!0})}e(document).ready((function(){e(document).find(i).select2(),c(s=e(i).val()),e("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",(function(){n=e(this).data("cohortid"),o.changeExportUrl(n,l,o.cohortReplaceFlag),e("#cohortfilter").html(e(this).text()),c(s,n)})),e(document).on("change",i,(function(){c(s=e(this).val()),console.log(s),o.changeExportUrl(s,l,o.filterReplaceFlag)}))}))}}}));