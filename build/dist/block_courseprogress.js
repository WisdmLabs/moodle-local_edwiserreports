define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig"],function(t,l,d){return{init:function(){var o=d.getPanel("#courseprogressblock"),e=d.getPanel("#courseprogressblock","body"),r=(d.getPanel("#courseprogressblock","header"),d.getPanel("#courseprogressblock","footer"),e+" #wdm-courseprogress-select"),s=e+" .ct-chart",a=e+" .loader",n=o+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item";function c(){var e=t(r).val();d.changeExportUrl(e,n),t.ajax({url:d.requestUrl,type:"GET",dataType:"json",data:{action:"get_courseprogress_graph_data_ajax",sesskey:t(o).data("sesskey"),data:JSON.stringify({courseid:e})}}).done(function(e){d.courseProgressBlock.graph.data=e.data}).fail(function(e){console.log(e)}).always(function(){!function(){var e={labels:d.courseProgressBlock.graph.labels,datasets:[{label:d.courseProgressBlock.graph.label,data:d.courseProgressBlock.graph.data,backgroundColor:d.courseProgressBlock.graph.backgroundColor}]};myPieChart=new l(d.courseProgressBlock.ctx,{data:e,type:d.courseProgressBlock.graph.type,options:d.courseProgressBlock.graph.options})}(),t(a).addClass("d-none"),t(s).removeClass("d-none")})}t(document).ready(function(e){c(),e(r).on("change",function(){e(s).addClass("d-none"),e(a).removeClass("d-none"),c()})})}}});