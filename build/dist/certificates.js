define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/select2","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4","report_elucidsitereport/jquery-asPieProgress"],function(l,e,t,a,r,n){return{init:function(e){var r=l("#wdm-certificates-individual"),o=r.find(".table"),t=(r.find(".loader"),l("#wdm-certificates-select")),i=(r.find(".dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item"),null),a=null,d="#cohortfilter";function s(e,t){var a={action:"get_certificates_data_ajax",sesskey:l(r).data("sesskey"),data:JSON.stringify({certificateid:e,cohortid:t})};i&&i.destroy(),i=o.DataTable({ajax:n.generateUrl(n.requestUrl,a),dom:"<'pull-left'f><t><p>",columnDefs:[{targets:0,className:"align-middle"},{targets:1,className:"align-middle"},{targets:"_all",className:"align-middle text-center"}],columns:[{data:"username"},{data:"email"},{data:"issuedate"},{data:"dateenrolled"},{data:"grade"},{data:"courseprogress"}],oLanguage:{sEmptyTable:"No certificates are awarded"},initComplete:function(e,t){l(".pie-progress").asPieProgress({namespace:"pie_progress"}),o.show()}})}l(document).ready(function(){t.select2(),s(a=t.val()),l("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",function(){cohortId=l(this).data("cohortid"),l(d).html(l(this).text()),s(a,cohortId)}),t.on("change",function(){s(l(this).val())})})}}});