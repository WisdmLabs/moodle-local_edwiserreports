define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig"],function(d,p,c){return{init:function(){var e=null,t=c.getPanel("#lpstatsblock"),a=c.getPanel("#lpstatsblock","body"),l=(c.getPanel("#lpstatsblock","title"),a+" #wdm-lpstats-select"),o=t+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",s=a+" .ct-chart",n=a+" .loader";function r(a){d.ajax({url:c.requestUrl,type:c.requestType,dataType:c.requestDataType,sesskey:d(t).data("sesskey"),data:{action:"get_lpstats_data_ajax",sesskey:d(t).data("sesskey"),data:JSON.stringify({lpid:a})}}).done(function(a){!function(a){c.lpStatsBlock.graph.labels=a.labels,c.lpStatsBlock.graph.data=a.data;var t={labels:c.lpStatsBlock.graph.labels,datasets:[{data:c.lpStatsBlock.graph.data,backgroundColor:c.lpStatsBlock.graph.backgroundColor}]};e=new p(c.lpStatsBlock.ctx,{data:t,type:c.lpStatsBlock.graph.type,options:c.lpStatsBlock.graph.options})}(a.data)}).fail(function(a){console.log(a)}).always(function(){d(n).addClass("d-none"),d(s).removeClass("d-none")})}d(document).ready(function(){var a=d(l).val();r(a),d(l).on("change",function(){a=d(this).val(),d(s).addClass("d-none"),d(n).removeClass("d-none"),c.changeExportUrl(a,o,"F"),e.destroy(),r(a)})})}}});