define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4"],function(c,i,l,d,u,e){return{init:function(n){c(document).ready(function(){var r="#wdm-courseprogress-individual",a=r+" .table",s=".table-dropdown",o=r+" .dataTables_wrapper .row:first-child > div:first-child";c.ajax({url:e.requestUrl,data:{action:"get_courseprogress_graph_data_ajax",sesskey:c(r).data("sesskey"),data:JSON.stringify({courseid:"all"})}}).done(function(e){var t={courseprogress:e};u.render("report_elucidsitereport/courseprogress",t).then(function(e,t){u.replaceNode(r,e,t)}).fail(function(e){console.log(e)}).always(function(){c(a).DataTable({order:[[0,"desc"]],bLengthChange:!1,pageLength:50,initComplete:function(){c(o).html(c(s).html()),c(s).remove(),c(o+" .dropdown").show()},columnDefs:[{targets:0},{targets:1,className:"text-center"},{targets:2,className:"text-center"},{targets:3,className:"text-center"},{targets:4,className:"text-center"},{targets:5,className:"text-center"},{targets:6,className:"text-center"},{targets:7,className:"text-center"}]}),c(a).removeClass("d-none"),c("#wdm-courseprogress-individual .loader").remove()})}).fail(function(e){console.log(e)}),c(document).on("click","#wdm-courseprogress-individual .table a",function(){var e=c(this).data("minvalue"),t=c(this).data("maxvalue"),r=c(this).data("courseid"),a=c(this).data("coursename"),s=null;i.create({body:d.loadFragment("report_elucidsitereport","userslist",n,{page:"courseprogress",courseid:r,minval:e,maxval:t})}).then(function(e){s=e.getRoot(),e.setTitle(a),e.show(),s.on(l.hidden,function(){e.destroy()})})})})}}});