define(["jquery","local_sitereport/variables","local_sitereport/common"],(function(a,t){return{init:function(e){var o=a("#wdm-completion-individual"),l=o.find(".table"),n=o.find(".loader"),i=null,r=0;function s(e,r){i&&(i.destroy(),l.hide(),n.show());var s={action:"get_completion_data_ajax",sesskey:o.data("sesskey"),data:JSON.stringify({courseid:e,cohortid:r})},d=t.generateUrl(t.requestUrl,s);l.show(),i=l.DataTable({ajax:d,oLanguage:{sEmptyTable:"No users are enrolled as student"},columns:[{data:"username"},{data:"enrolledon"},{data:"enrolltype"},{data:"noofvisits"},{data:"completion"},{data:"compleiontime"},{data:"grade"},{data:"lastaccess"}],drawCallback:function(){a(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),a(".dataTables_filter").addClass("pagination-sm pull-right")},columnDefs:[{className:"text-left",targets:0},{className:"text-left",targets:1},{className:"text-center",targets:"_all"}],initComplete:function(){a(n).hide()},bInfo:!1})}a(document).ready((function(){var e=t.getUrlParameter("courseid");s(e,r),a(t.cohortFilterItem).on("click",(function(){r=a(this).data("cohortid"),a(t.cohortFilterBtn).html(a(this).text()),t.changeExportUrl(r,t.exportUrlLink,t.cohortReplaceFlag),s(e,r)}))}))}}}));