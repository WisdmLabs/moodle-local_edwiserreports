define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4"],function(l,c,u,p,f,h){return{init:function(s){var o="#wdm-courseprogress-individual",r=o+" .table",a=o+" .loader",i=null,e="#cohortfilter",n=0,d=null;function t(e){d=l(o).data("sesskey"),l.ajax({url:h.requestUrl,data:{action:"get_courseprogress_graph_data_ajax",sesskey:d,data:JSON.stringify({courseid:"all",cohortid:e})}}).done(function(e){var t={courseprogress:e,sesskey:d};f.render("report_elucidsitereport/courseprogress",t).then(function(e,t){f.replaceNode(o,e,t)}).fail(function(e){console.log(e)}).always(function(){i=l(r).DataTable({dom:'<"pull-left"f><t><p>',order:[[0,"desc"]],bLengthChange:!1,pageLength:50,initComplete:function(){l("#wdm-courseprogress-individual .dataTables_wrapper .row:first-child > div:first-child .dropdown").show()},columnDefs:[{targets:0,className:"text-left"},{targets:"_all",className:"text-center"}]}),l(r).show(),l(a).hide()})}).fail(function(e){console.log(e)})}l(document).ready(function(){t(n),l(document).on("click","#cohortfilter ~ .dropdown-menu .dropdown-item",function(){i&&(i.destroy(),l(r).hide(),l(a).show()),n=l(this).data("cohortid"),l(e).html(l(this).text()),t(n)}),l(document).on("click","#wdm-courseprogress-individual .table a",function(){var e=l(this).data("minvalue"),t=l(this).data("maxvalue"),o=l(this).data("courseid"),r=l(this).data("coursename"),a=null;c.create({body:p.loadFragment("report_elucidsitereport","userslist",s,{page:"courseprogress",courseid:o,minval:e,maxval:t,cohortid:n})}).then(function(e){a=e.getRoot(),e.setTitle(r),e.show(),a.on(u.hidden,function(){e.destroy()})})})})}}});