define(["jquery","core/chartjs","report_elucidsitereport/defaultconfig","report_elucidsitereport/variables","report_elucidsitereport/select2"],function(c,p,i,u){return{init:function(){var e=null,a=i.getPanel("#lpstatsblock"),l=i.getPanel("#lpstatsblock","body"),s=(i.getPanel("#lpstatsblock","title"),l+" #wdm-lpstats-select"),o=a+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",n=l+" .ct-chart",r=l+" .loader";function d(t){c.ajax({url:i.requestUrl,type:i.requestType,dataType:i.requestDataType,sesskey:c(a).data("sesskey"),data:{action:"get_lpstats_data_ajax",sesskey:c(a).data("sesskey"),data:JSON.stringify({lpid:t})}}).done(function(t){!function(t){i.lpStatsBlock.graph.labels=t.labels,i.lpStatsBlock.graph.data=t.data;var a={labels:i.lpStatsBlock.graph.labels,datasets:[{data:i.lpStatsBlock.graph.data,backgroundColor:i.lpStatsBlock.graph.backgroundColor}]};e=new p(i.lpStatsBlock.ctx,{data:a,type:i.lpStatsBlock.graph.type,options:i.lpStatsBlock.graph.options})}(t.data)}).fail(function(t){console.log(t)}).always(function(){c(r).addClass("d-none"),c(n).removeClass("d-none")})}c(document).ready(function(){var t=c(s).val();d(t),c(l+" .singleselect").select2(),c(s).on("change",function(){t=c(this).val(),c(n).addClass("d-none"),c(r).removeClass("d-none"),i.changeExportUrl(t,o,u.filterReplaceFlag),e.destroy(),d(t)})})}}});