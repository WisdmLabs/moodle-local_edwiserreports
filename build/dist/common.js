define(["jquery","core/notification","core/fragment","core/modal_factory","core/modal_events","report_elucidsitereport/variables","report_elucidsitereport/select2","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4"],function(o,i,r,n,d,e){function l(e,t){var a="#wdm-elucidsitereport > div";t?o("body").hasClass("site-menubar-fold")&&e<1080?o(a).addClass("col-lg-12"):o(a).removeClass("col-lg-12"):e<820?o(a).addClass("col-lg-12"):o(a).removeClass("col-lg-12");o(document).find(".table.dataTable").DataTable().draw()}o(document).ready(function(){var e=null,t=o("#page-admin-report-elucidsitereport-index .page-content"),a=t.width();l(a,e),o(document).on("click","#toggleMenubar [data-toggle='menubar'], .page-aside-pin",function(){e=o(this).hasClass("nav-link"),l(a=t.width(),e)}),o(document).on("click",'.export-dropdown a[data-action="email"]',function(e){e.preventDefault();var a=this;n.create({type:n.types.SAVE_CANCEL,title:"Email Dialog Box",body:r.loadFragment("report_elucidsitereport","email_dialog",o(a).data("contextid"),{blockname:o(a).data("blockname")})},o(this)).done(function(e){var t=e.getRoot();t.on(d.hidden,function(){e.destroy()}),t.on(d.save,function(){!function(e,t){o.ajax({url:e.href,type:"POST",data:t.find("form").serialize()}).done(function(e){(e=o.parseJSON(e)).error?i.addNotification({message:e.errormsg,type:"error"}):i.addNotification({message:"Email has been sent",type:"info"})}).fail(function(){i.addNotification({message:"Failed to send the email",type:"error"})})}(a,t)}),e.setSaveButtonText("Send"),e.show()})})})});