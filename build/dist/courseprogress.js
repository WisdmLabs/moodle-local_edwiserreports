define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","report_elucidsitereport/variables","report_elucidsitereport/jquery.dataTables","report_elucidsitereport/dataTables.bootstrap4"],function(i,n,d,l,o,e){return{init:function(s){i(document).ready(function(){var t="#wdm-courseprogress-individual",a=t+" .table";i.ajax({url:e.requestUrl,data:{action:"get_courseprogress_graph_data_ajax",sesskey:i(t).data("sesskey"),data:JSON.stringify({courseid:"all"})}}).done(function(e){var r={courseprogress:e};o.render("report_elucidsitereport/courseprogress",r).then(function(e,r){o.replaceNode(t,e,r)}).fail(function(e){console.log(e)}).always(function(){i(a).DataTable({order:[[0,"desc"]],bLengthChange:!1,pageLength:50,initComplete:function(){i("#wdm-courseprogress-individual .dataTables_wrapper .row:first-child > div:first-child .dropdown").show()},columnDefs:[{targets:0,className:"text-left"},{targets:"_all",className:"text-center"}]}),i(a).removeClass("d-none"),i("#wdm-courseprogress-individual .loader").remove()})}).fail(function(e){console.log(e)}),i(document).on("click","#wdm-courseprogress-individual .table a",function(){var e=i(this).data("minvalue"),r=i(this).data("maxvalue"),t=i(this).data("courseid"),a=i(this).data("coursename"),o=null;n.create({body:l.loadFragment("report_elucidsitereport","userslist",s,{page:"courseprogress",courseid:t,minval:e,maxval:r})}).then(function(e){o=e.getRoot(),e.setTitle(a),e.show(),o.on(d.hidden,function(){e.destroy()})})})})}}});