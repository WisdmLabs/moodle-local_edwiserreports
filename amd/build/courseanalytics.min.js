define(["jquery","local_sitereport/variables","local_sitereport/jquery.dataTables","local_sitereport/dataTables.bootstrap4","local_sitereport/common"],(function(e,t){return{init:function(a){var r=e("#wdm-courseanalytics-individual"),o=r.find(".recent-visits .table"),n=r.find(".recent-enrolment .table"),s=r.find(".recent-completion .table"),i=e(".loader"),l=null,c=null,d=null,u=0;function f(a,i){var u=r.data("sesskey");e.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,data:{action:"get_courseanalytics_data_ajax",sesskey:u,data:JSON.stringify({courseid:a,cohortid:i})}}).done((function(e){l=p(o,l,e.data.recentvisits),c=p(n,c,e.data.recentenrolments),d=p(s,d,e.data.recentcompletions)})).fail((function(e){console.log(e)})).always((function(){e(window).resize(),r.fadeIn("slow")}))}function p(e,t,a){var n="No users has Enrolled in this course";return e==s?n="No users has completed this course":e==o&&(n="No users has visited this course"),null!=t&&t.destroy(),i.hide(),e.fadeIn("slow"),r.fadeIn("slow"),e.DataTable({data:a,responsive:!0,oLanguage:{sEmptyTable:n},columnDefs:[{className:"text-left",targets:0},{className:"text-center",targets:"_all"}],order:[[1,"desc"]],scrollY:350,scrollX:!0,paging:!0,bInfo:!1,searching:!1,lengthChange:!1,paging:!1})}e(document).ready((function(){var a=t.getUrlParameter("courseid");e("#cohortfilter ~ .dropdown-menu .dropdown-item").on("click",(function(){u=e(this).data("cohortid"),e("#cohortfilter").html(e(this).text()),f(a,u)})),f(a,u)}))}}}));